os:
  - osx

language: c

install:
  - brew update && brew install criterion readline lcov gcovr

- name: Upload coverage reports to Codecov
  uses: codecov/codecov-action@v3

jobs:
  include:
    - stage: build
      script:
        - make debug
   - stage: Unit tests
     script:
       - make test
   - stage: Lexer tests
     script:
       - make coverage
